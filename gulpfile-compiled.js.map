{"version":3,"sources":["gulpfile.js"],"names":[],"mappings":"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","file":"gulpfile-compiled.js","sourcesContent":["// 载入外挂\r\nvar gulp = require('gulp'),\r\n    sass = require('gulp-ruby-sass'),//处理sass样式表\r\n    autoprefixer = require('gulp-autoprefixer'),\r\n    minifycss = require('gulp-minify-css'),//- 压缩CSS为一行；\r\n    jshint = require('gulp-jshint'),\r\n    uglify = require('gulp-uglify'),//使用gulp-uglify压缩javascript文件，减小文件大小\r\n    imagemin = require('gulp-imagemin'),\r\n    rename = require('gulp-rename'),//重命名一个文件\r\n    clean = require('gulp-clean'),//清理生成的文件\r\n    concat = require('gulp-concat'),//- 多个文件合并为一个；\r\n    notify = require('gulp-notify'),\r\n    cache = require('gulp-cache'),\r\n    rev = require('gulp-rev'),//- 对文件名加MD5后缀\r\n    revCollector = require('gulp-rev-collector'), //- 路径替换\r\nbabel = require('gulp-babel'),//使用babel\r\n//module 打包使用到的工具\r\n    babelify = require('babelify'),\r\n    gutil = require('gulp-util'),\r\n    browserify = require(\"browserify\"),\r\n    sourcemaps = require(\"gulp-sourcemaps\"),\r\n    source = require('vinyl-source-stream'),\r\n    buffer = require('vinyl-buffer'),\r\n\r\nlivereload = require('gulp-livereload');\r\n\r\n\r\n// 样式\r\ngulp.task('styles', function() {\r\n    return gulp.src('styles/main.css')\r\n       // .pipe(sass({ style: 'expanded', }))\r\n        .pipe(autoprefixer('last 2 version', 'safari 5', 'ie 8', 'ie 9', 'opera 12.1', 'ios 6', 'android 4'))\r\n        .pipe(gulp.dest('dist/styles'))\r\n        .pipe(rename({ suffix: '.min' }))\r\n        .pipe(minifycss())\r\n        .pipe(gulp.dest('dist/styles'))\r\n        .pipe(notify({ message: 'Styles task complete' }));\r\n});\r\n\r\n// 脚本\r\n/*\r\n*1.将指定的js脚本合并并发布到指定的位置\r\n*\r\n* */\r\ngulp.task('scripts', function() {\r\n    return gulp.src('scripts/**/*-compiled.js')\r\n       // .pipe(jshint('.jshintrc'))\r\n        .pipe(jshint.reporter('default'))\r\n        .pipe(concat('index.js'))\r\n        .pipe(gulp.dest('dist/scripts'))\r\n        .pipe(rename({ suffix: '.min' }))\r\n        .pipe(uglify())\r\n        .pipe(gulp.dest('dist/scripts'))\r\n        .pipe(notify({ message: 'Scripts task complete' }));\r\n});\r\n\r\n// 图片\r\ngulp.task('images', function() {\r\n    return gulp.src('images/**/*')\r\n        .pipe(cache(imagemin({ optimizationLevel: 3, progressive: true, interlaced: true })))\r\n        .pipe(gulp.dest('dist/images'))\r\n        .pipe(notify({ message: 'Images task complete' }));\r\n});\r\n\r\n// 清理\r\ngulp.task('clean', function() {\r\n    return gulp.src(['dist/styles', 'dist/scripts', 'dist/images'], {read: false})\r\n        .pipe(clean());\r\n});\r\n\r\n\r\ngulp.task('babeltask', () => {\r\n    return gulp.src(['index.js','scripts/**/*-compiled.js'])\r\n        .pipe(babel({\r\n            presets: ['es2015']\r\n        }))\r\n        .pipe(gulp.dest('dist'));\r\n});\r\n// 看守\r\ngulp.task('watch', function() {\r\n\r\n    // 看守所有.scss档\r\n    gulp.watch('src/styles/**/*.css', ['styles']);\r\n\r\n    // 看守所有.js档\r\n    gulp.watch('src/scripts/**/*.js', ['scripts']);\r\n\r\n    // 看守所有图片档\r\n    gulp.watch('src/images/**/*', ['images']);\r\n\r\n    // 建立即时重整伺服器\r\n    var server = livereload();\r\n\r\n    // 看守所有位在 dist/  目录下的档案，一旦有更动，便进行重整\r\n    gulp.watch(['dist/**']).on('change', function(file) {\r\n        server.changed(file.path);\r\n    });\r\n\r\n});\r\n\r\nvar gulpLoadPlugins = require('gulp-load-plugins');\r\n\r\nvar plugins = gulpLoadPlugins();\r\nplugins.jshint = require('gulp-jshint');\r\nplugins.concat = require('gulp-concat');\r\n\r\ngulp.task('concat', function() {                                //- 创建一个名为 concat 的 task\r\n    gulp.src(['./css/wap_v3.1.css', './css/wap_v3.1.3.css'])    //- 需要处理的css文件，放到一个字符串数组里\r\n        .pipe(concat('wap.min.css'))                            //- 合并后的文件名\r\n        .pipe(minifyCss())                                      //- 压缩处理成一行\r\n        .pipe(rev())                                            //- 文件名加MD5后缀\r\n        .pipe(gulp.dest('./css'))                               //- 输出文件本地\r\n        .pipe(rev.manifest())                                   //- 生成一个rev-manifest.json\r\n        .pipe(gulp.dest('./rev'));                              //- 将 rev-manifest.json 保存到 rev 目录内\r\n});\r\n\r\ngulp.task('rev', function() {\r\n    gulp.src(['./rev/*.json', './application/**/header.php'])   //- 读取 rev-manifest.json 文件以及需要进行css名替换的文件\r\n        .pipe(revCollector())                                   //- 执行文件内css名的替换\r\n        .pipe(gulp.dest('./application/'));                     //- 替换后的文件输出的目录\r\n});\r\n\r\n//gulp.task('default', ['concat', 'rev']);\r\n\r\n\r\ngulp.task(\"browserify\", function () {\r\n    var b = browserify({\r\n        entries: \"./scripts/module/module_test2-compiled.js\",\r\n        debug: true\r\n    })\r\n        .transform(babelify)\r\n        .on('error',gutil.log)\r\n        .bundle()\r\n        .on('error',gutil.log)\r\n        .pipe(source('bundle.js'))\r\n        .pipe(gulp.dest(\"./dist\"));\r\n\r\n/*\r\n\r\n    return b.bundle()\r\n        .pipe(source(\"bundle.js\"))\r\n        .pipe(buffer())\r\n        .pipe(sourcemaps.init({loadMaps: true}))\r\n        .pipe(sourcemaps.write(\".\"))\r\n        .pipe(gulp.dest(\"./dist\"));\r\n*/\r\n});\r\n\r\n// 预设任务\r\ngulp.task('default', ['clean','babeltask'], function() {\r\n    gulp.start('styles', 'scripts', 'images','browserify');\r\n});\r\n"]}